import{_ as s,c as i,o as a,a5 as l}from"./chunks/framework.BIhQMg0k.js";const c=JSON.parse('{"title":"Vue1.x æºç æ·±åº¦è§£æ","description":"","frontmatter":{"title":"Vue1.x æºç æ·±åº¦è§£æ","date":"2020-2-05","categories":["vue","é¢è¯•"]},"headers":[],"relativePath":"blogs/interview/20200205.md","filePath":"blogs/interview/20200205.md"}'),n={name:"blogs/interview/20200205.md"},h=l(`<h1 id="vue1-x-æºç æ·±åº¦è§£æ-ğŸ”" tabindex="-1">Vue1.x æºç æ·±åº¦è§£æ ğŸ” <a class="header-anchor" href="#vue1-x-æºç æ·±åº¦è§£æ-ğŸ”" aria-label="Permalink to &quot;Vue1.x æºç æ·±åº¦è§£æ ğŸ”&quot;">â€‹</a></h1><h2 id="å“åº”å¼ç³»ç»Ÿå®ç°åŸç†-âš™ï¸" tabindex="-1">å“åº”å¼ç³»ç»Ÿå®ç°åŸç† âš™ï¸ <a class="header-anchor" href="#å“åº”å¼ç³»ç»Ÿå®ç°åŸç†-âš™ï¸" aria-label="Permalink to &quot;å“åº”å¼ç³»ç»Ÿå®ç°åŸç† âš™ï¸&quot;">â€‹</a></h2><h3 id="vue1-x-çš„æ•°æ®å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„" tabindex="-1">Vue1.x çš„æ•°æ®å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ <a class="header-anchor" href="#vue1-x-çš„æ•°æ®å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„" aria-label="Permalink to &quot;Vue1.x çš„æ•°æ®å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&quot;">â€‹</a></h3><p>Vue1.x çš„å“åº”å¼ç³»ç»Ÿä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š</p><h4 id="_1-æ•°æ®æ‹¦æˆª-ğŸ“¦" tabindex="-1">1. æ•°æ®æ‹¦æˆª ğŸ“¦ <a class="header-anchor" href="#_1-æ•°æ®æ‹¦æˆª-ğŸ“¦" aria-label="Permalink to &quot;1. æ•°æ®æ‹¦æˆª ğŸ“¦&quot;">â€‹</a></h4><ul><li>æ ¸å¿ƒå®ç°ï¼šé€šè¿‡ <code>Object.defineProperty</code></li><li>å®ç°è¿‡ç¨‹ï¼š <ul><li>é€’å½’éå†æ•´ä¸ª data å¯¹è±¡</li><li>ä¸ºæ¯ä¸ªå±æ€§è®¾ç½® getter/setter</li><li>å¯¹æ•°ç»„ç±»å‹åšç‰¹æ®Šå¤„ç†</li></ul></li></ul><h4 id="_2-æ•°ç»„å“åº”å¼å¤„ç†-ğŸ“‹" tabindex="-1">2. æ•°ç»„å“åº”å¼å¤„ç† ğŸ“‹ <a class="header-anchor" href="#_2-æ•°ç»„å“åº”å¼å¤„ç†-ğŸ“‹" aria-label="Permalink to &quot;2. æ•°ç»„å“åº”å¼å¤„ç† ğŸ“‹&quot;">â€‹</a></h4><ul><li>æ‹¦æˆªæ•°ç»„çš„ä¸ƒä¸ªå˜å¼‚æ–¹æ³•ï¼š <ul><li>pushã€popã€shiftã€unshiftã€spliceã€sortã€reverse</li></ul></li><li>å¢å¼ºè¿™äº›æ–¹æ³•ï¼š <ul><li>å®ŒæˆåŸæœ‰åŠŸèƒ½</li><li>æ·»åŠ ä¾èµ–é€šçŸ¥èƒ½åŠ›</li><li>å¯¹æ–°å¢æ•°æ®è¿›è¡Œå“åº”å¼å¤„ç†</li></ul></li></ul><h4 id="_3-ä¾èµ–æ”¶é›†ä¸æ›´æ–°-ğŸ”„" tabindex="-1">3. ä¾èµ–æ”¶é›†ä¸æ›´æ–° ğŸ”„ <a class="header-anchor" href="#_3-ä¾èµ–æ”¶é›†ä¸æ›´æ–°-ğŸ”„" aria-label="Permalink to &quot;3. ä¾èµ–æ”¶é›†ä¸æ›´æ–° ğŸ”„&quot;">â€‹</a></h4><ol><li><strong>åˆå§‹åŒ–é˜¶æ®µ</strong>ï¼š</li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼ªä»£ç ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineReactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, key, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¾èµ–æ”¶é›†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dep.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">depend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> val</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newVal) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newVal</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šçŸ¥æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dep.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li><strong>æŒ‚è½½é˜¶æ®µ</strong>ï¼š</li></ol><ul><li>ç¼–è¯‘ DOM æ ‘</li><li>é‡åˆ°å“åº”å¼æ•°æ®æ—¶åˆ›å»º Watcher</li><li>è§¦å‘ getter è¿›è¡Œä¾èµ–æ”¶é›†</li></ul><ol start="3"><li><strong>æ›´æ–°é˜¶æ®µ</strong>ï¼š</li></ol><ul><li>æ•°æ®å˜åŒ–è§¦å‘ setter</li><li>é€šçŸ¥ç›¸å…³ Watcher æ›´æ–°</li><li>Watcher æ‰§è¡Œæ›´æ–°å›è°ƒï¼Œæ›´æ–° DOM</li></ul><h2 id="vue1-x-è®¾è®¡è¯„ä»·-ğŸ’­" tabindex="-1">Vue1.x è®¾è®¡è¯„ä»· ğŸ’­ <a class="header-anchor" href="#vue1-x-è®¾è®¡è¯„ä»·-ğŸ’­" aria-label="Permalink to &quot;Vue1.x è®¾è®¡è¯„ä»· ğŸ’­&quot;">â€‹</a></h2><h3 id="ä¼˜ç‚¹-âœ…" tabindex="-1">ä¼˜ç‚¹ âœ… <a class="header-anchor" href="#ä¼˜ç‚¹-âœ…" aria-label="Permalink to &quot;ä¼˜ç‚¹ âœ…&quot;">â€‹</a></h3><ol><li><p><strong>ç®€å•ç›´æ¥</strong>ï¼š</p><ul><li>æ•°æ®ä¸ DOM ä¸€ä¸€å¯¹åº”</li><li>æ›´æ–°ç²¾ç¡®ï¼Œæ— è™šæ‹Ÿ DOM å¼€é”€</li><li>é€‚åˆä¸­å°å‹åº”ç”¨</li></ul></li><li><p><strong>æ€§èƒ½è¡¨ç°</strong>ï¼š</p><ul><li>ä¸­å°å‹é¡¹ç›®æ€§èƒ½ä¼˜å¼‚</li><li>æ›´æ–°è·¯å¾„çŸ­ï¼Œå“åº”å¿«é€Ÿ</li></ul></li></ol><h3 id="å±€é™æ€§-âš ï¸" tabindex="-1">å±€é™æ€§ âš ï¸ <a class="header-anchor" href="#å±€é™æ€§-âš ï¸" aria-label="Permalink to &quot;å±€é™æ€§ âš ï¸&quot;">â€‹</a></h3><ol><li><p><strong>æ‰©å±•æ€§é—®é¢˜</strong>ï¼š</p><ul><li>Watcher ä¸æ•°æ®ä¸€ä¸€å¯¹åº”</li><li>å¤§å‹åº”ç”¨ä¼šåˆ›å»ºè¿‡å¤š Watcher</li><li>å†…å­˜å ç”¨è¾ƒå¤§</li></ul></li><li><p><strong>å¤§å‹é¡¹ç›®ä¸é€‚ç”¨</strong>ï¼š</p><ul><li>Watcher æ•°é‡éšé¡¹ç›®è§„æ¨¡çº¿æ€§å¢é•¿</li><li>èµ„æºæ¶ˆè€—å¤§</li><li>æ€§èƒ½å®¹æ˜“å‡ºç°ç“¶é¢ˆ</li></ul></li></ol><h3 id="ä»£ç ç¤ºä¾‹-ğŸ“" tabindex="-1">ä»£ç ç¤ºä¾‹ ğŸ“ <a class="header-anchor" href="#ä»£ç ç¤ºä¾‹-ğŸ“" aria-label="Permalink to &quot;ä»£ç ç¤ºä¾‹ ğŸ“&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç®€å•çš„å“åº”å¼å®ç°ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> observe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        defineReactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, key, obj[key])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Watcher ç®€å•å®ç°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Watcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.exp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exp</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cb</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¾èµ–æ”¶é›†é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ›´æ–°é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="æ€»ç»“-ğŸ“" tabindex="-1">æ€»ç»“ ğŸ“ <a class="header-anchor" href="#æ€»ç»“-ğŸ“" aria-label="Permalink to &quot;æ€»ç»“ ğŸ“&quot;">â€‹</a></h2><p>Vue1.x çš„è®¾è®¡éå¸¸ä¼˜é›…åœ°è§£å†³äº†å‰ç«¯å¼€å‘ä¸­æ•°æ®ä¸ DOM æ“ä½œçš„ç—›ç‚¹ã€‚å®ƒé€šè¿‡å“åº”å¼ç³»ç»Ÿå®ç°äº†æ•°æ®é©±åŠ¨è§†å›¾çš„ç†å¿µï¼Œä¸ºä¸­å°å‹åº”ç”¨æä¾›äº†æä½³çš„å¼€å‘ä½“éªŒã€‚è™½ç„¶åœ¨å¤§å‹åº”ç”¨ä¸Šå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼Œä½†å®ƒçš„è®¾è®¡æ€æƒ³å¯¹åç»­çš„ Vue2.x å’Œ Vue3.x éƒ½äº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚</p><blockquote><p>ğŸ’¡ <strong>å­¦ä¹ å»ºè®®</strong>ï¼š</p><ol><li>æ·±å…¥ç†è§£å“åº”å¼åŸç†å¯¹äºç†è§£ç°ä»£å‰ç«¯æ¡†æ¶è‡³å…³é‡è¦</li><li>ç»“åˆå®é™…é¡¹ç›®è§„æ¨¡é€‰æ‹©åˆé€‚çš„ Vue ç‰ˆæœ¬</li><li>å…³æ³¨æ€§èƒ½ä¼˜åŒ–ï¼Œåˆç†æ§åˆ¶å“åº”å¼æ•°æ®çš„ç²’åº¦</li></ol></blockquote>`,25),t=[h];function e(p,k,r,E,d,g){return a(),i("div",null,t)}const y=s(n,[["render",e]]);export{c as __pageData,y as default};
