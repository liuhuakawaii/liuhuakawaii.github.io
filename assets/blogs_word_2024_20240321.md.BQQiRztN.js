import{_ as s,c as i,o as a,a5 as n}from"./chunks/framework.Bx-mEslM.js";const y=JSON.parse('{"title":"è§£å†³iframeä¸­çš„mousemoveåœ¨parent windowä¸­å»¶ç»­çš„é—®é¢˜","description":"","frontmatter":{"title":"è§£å†³iframeä¸­çš„mousemoveåœ¨parent windowä¸­å»¶ç»­çš„é—®é¢˜","date":"2024-3-21","categories":["å‰ç«¯è¿›é˜¶","å·¥ä½œéšè®°"]},"headers":[],"relativePath":"blogs/word/2024/20240321.md","filePath":"blogs/word/2024/20240321.md"}'),e={name:"blogs/word/2024/20240321.md"},l=n(`<h1 id="è§£å†³iframeä¸­çš„mousemoveåœ¨parent-windowä¸­å»¶ç»­çš„é—®é¢˜-ğŸ–±ï¸" tabindex="-1">è§£å†³iframeä¸­çš„mousemoveåœ¨parent windowä¸­å»¶ç»­çš„é—®é¢˜ ğŸ–±ï¸ <a class="header-anchor" href="#è§£å†³iframeä¸­çš„mousemoveåœ¨parent-windowä¸­å»¶ç»­çš„é—®é¢˜-ğŸ–±ï¸" aria-label="Permalink to &quot;è§£å†³iframeä¸­çš„mousemoveåœ¨parent windowä¸­å»¶ç»­çš„é—®é¢˜ ğŸ–±ï¸&quot;">â€‹</a></h1><h2 id="èƒŒæ™¯æè¿°-ğŸ“" tabindex="-1">èƒŒæ™¯æè¿° ğŸ“ <a class="header-anchor" href="#èƒŒæ™¯æè¿°-ğŸ“" aria-label="Permalink to &quot;èƒŒæ™¯æè¿° ğŸ“&quot;">â€‹</a></h2><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šæˆ‘ä»¬åœ¨iframeä¸­å®ç°äº†ä¸€ä¸ª3Dæ¨¡å‹é¢„è§ˆåŠŸèƒ½ï¼Œé€šè¿‡mousedown + mousemoveæ¥æ§åˆ¶æ¨¡å‹æ—‹è½¬ã€‚ä½†æ˜¯å½“ç”¨æˆ·é¼ æ ‡ç§»å‡ºiframeèŒƒå›´æ—¶ï¼Œmousemoveäº‹ä»¶å°±ä¼šå¤±æ•ˆï¼Œä¸¥é‡å½±å“äº†ç”¨æˆ·ä½“éªŒã€‚</p><h2 id="å¸¸è§è§£å†³æ–¹æ¡ˆåŠå…¶å±€é™æ€§-ğŸ¤”" tabindex="-1">å¸¸è§è§£å†³æ–¹æ¡ˆåŠå…¶å±€é™æ€§ ğŸ¤” <a class="header-anchor" href="#å¸¸è§è§£å†³æ–¹æ¡ˆåŠå…¶å±€é™æ€§-ğŸ¤”" aria-label="Permalink to &quot;å¸¸è§è§£å†³æ–¹æ¡ˆåŠå…¶å±€é™æ€§ ğŸ¤”&quot;">â€‹</a></h2><p>æœ€å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡iframeå’Œparent windowä¹‹é—´çš„é€šä¿¡æ¥å®ç°ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// iframeå†…éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mousedown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mousedown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// parent window</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.data.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mousedown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mousemove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mouseMoveHandler);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mouseup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mouseUpHandler);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>è¿™ç§æ–¹æ¡ˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>éœ€è¦å¤„ç†å¤æ‚çš„äº‹ä»¶ä¼ é€’é€»è¾‘</li><li>æ¶‰åŠåæ ‡ç³»è½¬æ¢</li><li>éœ€è¦åŒæ­¥ç®¡ç†å¤šä¸ªäº‹ä»¶ç›‘å¬å™¨</li><li>ä»£ç ç»´æŠ¤æˆæœ¬é«˜</li></ul><h2 id="æ„å¤–å‘ç°çš„è§£å†³æ–¹æ¡ˆ-ğŸ’¡" tabindex="-1">æ„å¤–å‘ç°çš„è§£å†³æ–¹æ¡ˆ ğŸ’¡ <a class="header-anchor" href="#æ„å¤–å‘ç°çš„è§£å†³æ–¹æ¡ˆ-ğŸ’¡" aria-label="Permalink to &quot;æ„å¤–å‘ç°çš„è§£å†³æ–¹æ¡ˆ ğŸ’¡&quot;">â€‹</a></h2><p>åœ¨å®éªŒè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ã€‚è¿™é‡Œé€šè¿‡ä¸¤ä¸ªdemoæ¥è¯´æ˜ï¼š</p><h3 id="demo-1-ä¼ ç»Ÿçš„äº‹ä»¶ç›‘å¬æ–¹å¼" tabindex="-1">Demo 1: ä¼ ç»Ÿçš„äº‹ä»¶ç›‘å¬æ–¹å¼ <a class="header-anchor" href="#demo-1-ä¼ ç»Ÿçš„äº‹ä»¶ç›‘å¬æ–¹å¼" aria-label="Permalink to &quot;Demo 1: ä¼ ç»Ÿçš„äº‹ä»¶ç›‘å¬æ–¹å¼&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›´æ¥åœ¨windowä¸Šç»‘å®šäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mousemove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleIframeMouseMove);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mouseup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleIframeMouseUp);</span></span></code></pre></div><p>è¿™ç§æ–¹å¼ä¸‹ï¼Œå½“é¼ æ ‡ç§»å‡ºiframeåï¼Œmousemoveäº‹ä»¶å°±ä¼šåœæ­¢ç›‘å¬ã€‚</p><h3 id="demo-2-åŠ¨æ€ç»‘å®šäº‹ä»¶å¤„ç†å™¨" tabindex="-1">Demo 2: åŠ¨æ€ç»‘å®šäº‹ä»¶å¤„ç†å™¨ <a class="header-anchor" href="#demo-2-åŠ¨æ€ç»‘å®šäº‹ä»¶å¤„ç†å™¨" aria-label="Permalink to &quot;Demo 2: åŠ¨æ€ç»‘å®šäº‹ä»¶å¤„ç†å™¨&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleIframeMouseDown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.onmousemove </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handleIframeMouseMove;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.onmouseup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handleIframeMouseUp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleIframeMouseMove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Mouse position - X: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clientX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, Y: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clientY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleIframeMouseUp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.onmousemove </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.onmouseup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç¥å¥‡çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼å¯ä»¥åœ¨é¼ æ ‡ç§»å‡ºiframeåç»§ç»­æ•è·mousemoveäº‹ä»¶ï¼</p><h2 id="æŠ€æœ¯åŸç†è§£é‡Š-ğŸ“š" tabindex="-1">æŠ€æœ¯åŸç†è§£é‡Š ğŸ“š <a class="header-anchor" href="#æŠ€æœ¯åŸç†è§£é‡Š-ğŸ“š" aria-label="Permalink to &quot;æŠ€æœ¯åŸç†è§£é‡Š ğŸ“š&quot;">â€‹</a></h2><p>è¿™ä¸ªç°è±¡çš„å…³é”®åœ¨äºäº‹ä»¶ç»‘å®šçš„æ—¶æœºå’Œæ–¹å¼ï¼š</p><ol><li><code>addEventListener</code>æ–¹å¼æ˜¯å£°æ˜å¼çš„äº‹ä»¶ç»‘å®šï¼Œä½œç”¨åŸŸå±€é™äºå½“å‰windowç¯å¢ƒ</li><li><code>onmousemove</code>èµ‹å€¼æ–¹å¼æ˜¯åœ¨mousedownè§¦å‘ååŠ¨æ€ç»‘å®šçš„ï¼Œæ­¤æ—¶æµè§ˆå™¨å·²å»ºç«‹äº†äº‹ä»¶è¿½è¸ªä¸Šä¸‹æ–‡</li></ol><h2 id="æœ€ä½³å®è·µå»ºè®®-âœ¨" tabindex="-1">æœ€ä½³å®è·µå»ºè®® âœ¨ <a class="header-anchor" href="#æœ€ä½³å®è·µå»ºè®®-âœ¨" aria-label="Permalink to &quot;æœ€ä½³å®è·µå»ºè®® âœ¨&quot;">â€‹</a></h2><ol><li>åœ¨éœ€è¦è·¨iframeè¿½è¸ªé¼ æ ‡äº‹ä»¶æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨åŠ¨æ€ç»‘å®šæ–¹å¼</li><li>æ³¨æ„åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼</li><li>è€ƒè™‘æ·»åŠ é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µæ£€æŸ¥</li></ol><h2 id="æ³¨æ„äº‹é¡¹-âš ï¸" tabindex="-1">æ³¨æ„äº‹é¡¹ âš ï¸ <a class="header-anchor" href="#æ³¨æ„äº‹é¡¹-âš ï¸" aria-label="Permalink to &quot;æ³¨æ„äº‹é¡¹ âš ï¸&quot;">â€‹</a></h2><ul><li>ç¡®ä¿iframeå’Œçˆ¶é¡µé¢åŒæºï¼Œå¦åˆ™å¯èƒ½å­˜åœ¨è·¨åŸŸé—®é¢˜</li><li>åœ¨ç§»åŠ¨ç«¯éœ€è¦é¢å¤–å¤„ç†touchäº‹ä»¶</li><li>æ³¨æ„æ€§èƒ½ä¼˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨é˜²æŠ–æˆ–èŠ‚æµå¤„ç†mousemoveäº‹ä»¶</li></ul><p>å¸Œæœ›è¿™ä¸ªå‘ç°èƒ½å¸®åŠ©é‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…ï¼å¦‚æœä½ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæˆ–è€…å‘ç°äº†å…¶ä»–æœ‰è¶£çš„ç°è±¡ï¼Œæ¬¢è¿è®¨è®ºäº¤æµã€‚ğŸ¤</p>`,24),h=[l];function t(p,k,E,d,r,o){return a(),i("div",null,h)}const c=s(e,[["render",t]]);export{y as __pageData,c as default};
