import{_ as s,c as i,o as a,a7 as n}from"./chunks/framework.DLSH1pMh.js";const c=JSON.parse('{"title":"å‰ç«¯æ‹ç…§çš„ä¸‰ç§å®ç°æ–¹æ¡ˆ","description":"","frontmatter":{"title":"å‰ç«¯æ‹ç…§çš„ä¸‰ç§å®ç°æ–¹æ¡ˆ","date":"2023-10-22T00:00:00.000Z","categories":["javascript","å·¥ä½œéšè®°","å·¥å…·è½®å­"]},"headers":[],"relativePath":"blogs/word/2023/1022.md","filePath":"blogs/word/2023/1022.md"}'),h={name:"blogs/word/2023/1022.md"},l=n(`<h1 id="ğŸ“¸-å‰ç«¯æ‹ç…§çš„ä¸‰ç§å®ç°æ–¹æ¡ˆ" tabindex="-1">ğŸ“¸ å‰ç«¯æ‹ç…§çš„ä¸‰ç§å®ç°æ–¹æ¡ˆ <a class="header-anchor" href="#ğŸ“¸-å‰ç«¯æ‹ç…§çš„ä¸‰ç§å®ç°æ–¹æ¡ˆ" aria-label="Permalink to &quot;ğŸ“¸ å‰ç«¯æ‹ç…§çš„ä¸‰ç§å®ç°æ–¹æ¡ˆ&quot;">â€‹</a></h1><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å®ç°æ‹ç…§åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸‰ç§å¸¸ç”¨çš„å®ç°æ–¹æ¡ˆï¼Œå¹¶è¯¦ç»†åˆ†æå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚</p><h2 id="ğŸ“±-æ–¹æ¡ˆä¸€-mediadevices-api" tabindex="-1">ğŸ“± æ–¹æ¡ˆä¸€ï¼šMediaDevices API <a class="header-anchor" href="#ğŸ“±-æ–¹æ¡ˆä¸€-mediadevices-api" aria-label="Permalink to &quot;ğŸ“± æ–¹æ¡ˆä¸€ï¼šMediaDevices API&quot;">â€‹</a></h2><p>è¿™æ˜¯ä¸€ç§è¾ƒä¸ºå¸¸ç”¨çš„æ–¹æ¡ˆï¼Œé€šè¿‡è°ƒç”¨è®¾å¤‡çš„åª’ä½“è®¾å¤‡æ¥å£æ¥å®ç°æ‹ç…§åŠŸèƒ½ã€‚</p><h3 id="ä¼˜ç‚¹-âœ…" tabindex="-1">ä¼˜ç‚¹ âœ… <a class="header-anchor" href="#ä¼˜ç‚¹-âœ…" aria-label="Permalink to &quot;ä¼˜ç‚¹ âœ…&quot;">â€‹</a></h3><ul><li>å…¼å®¹æ€§å¥½ï¼ˆä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒï¼‰</li><li>é¡µé¢UIå®Œå…¨å¯è‡ªå®šä¹‰</li><li>å¯å®ç°å®æ—¶é¢„è§ˆ</li><li>æ”¯æŒåˆ‡æ¢å‰åæ‘„åƒå¤´</li></ul><h3 id="ç¼ºç‚¹-âŒ" tabindex="-1">ç¼ºç‚¹ âŒ <a class="header-anchor" href="#ç¼ºç‚¹-âŒ" aria-label="Permalink to &quot;ç¼ºç‚¹ âŒ&quot;">â€‹</a></h3><ul><li>éœ€è¦ HTTPS ç¯å¢ƒï¼ˆæœ¬åœ°å¼€å‘é™¤å¤–ï¼‰</li><li>æ— æ³•è·å–ç…§ç‰‡çš„ EXIF ä¿¡æ¯</li><li>éœ€è¦ç”¨æˆ·æˆæƒæ‘„åƒå¤´æƒé™</li></ul><h3 id="å®ç°æ­¥éª¤" tabindex="-1">å®ç°æ­¥éª¤ <a class="header-anchor" href="#å®ç°æ­¥éª¤" aria-label="Permalink to &quot;å®ç°æ­¥éª¤&quot;">â€‹</a></h3><ol><li><strong>æ£€æŸ¥è®¾å¤‡æ”¯æŒ</strong></li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkCamera</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> devices</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.mediaDevices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enumerateDevices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> videoDevices</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> devices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> device.kind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;videoinput&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> videoDevices.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ£€æŸ¥æ‘„åƒå¤´å¤±è´¥:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li><strong>é…ç½®å’Œå¯åŠ¨æ‘„åƒå¤´</strong></li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startCamera</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> constraints</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        audio: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        video: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            width: { ideal: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1280</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            height: { ideal: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">720</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            facingMode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‰ç½®æ‘„åƒå¤´</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // facingMode: { exact: &quot;environment&quot; } // å¼ºåˆ¶ä½¿ç”¨åç½®æ‘„åƒå¤´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.mediaDevices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(constraints);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        videoRef.current.srcObject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> videoRef.current.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å¯åŠ¨æ‘„åƒå¤´å¤±è´¥:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li><strong>å®ç°æ‹ç…§åŠŸèƒ½</strong></li></ol><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> takePhoto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è®¾ç½®canvaså°ºå¯¸ä¸ºè§†é¢‘å®é™…å°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> videoRef.current.videoWidth;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> videoRef.current.videoHeight;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»˜åˆ¶å½“å‰è§†é¢‘å¸§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(videoRef.current, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è½¬æ¢ä¸ºå›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> photo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toDataURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;image/jpeg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> photo;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h2 id="ğŸ“²-æ–¹æ¡ˆäºŒ-åŸç”Ÿ-input-æ–¹æ¡ˆ" tabindex="-1">ğŸ“² æ–¹æ¡ˆäºŒï¼šåŸç”Ÿ Input æ–¹æ¡ˆ <a class="header-anchor" href="#ğŸ“²-æ–¹æ¡ˆäºŒ-åŸç”Ÿ-input-æ–¹æ¡ˆ" aria-label="Permalink to &quot;ğŸ“² æ–¹æ¡ˆäºŒï¼šåŸç”Ÿ Input æ–¹æ¡ˆ&quot;">â€‹</a></h2><p>è¿™æ˜¯æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œåˆ©ç”¨åŸç”Ÿ input æ ‡ç­¾å”¤èµ·è®¾å¤‡ç›¸æœºã€‚</p><h3 id="ä¼˜ç‚¹-âœ…-1" tabindex="-1">ä¼˜ç‚¹ âœ… <a class="header-anchor" href="#ä¼˜ç‚¹-âœ…-1" aria-label="Permalink to &quot;ä¼˜ç‚¹ âœ…&quot;">â€‹</a></h3><ul><li>å®ç°ç®€å•</li><li>å¯è·å– EXIF ä¿¡æ¯</li><li>ä½¿ç”¨ç³»ç»ŸåŸç”Ÿç›¸æœºï¼Œä½“éªŒå¥½</li></ul><h3 id="ç¼ºç‚¹-âŒ-1" tabindex="-1">ç¼ºç‚¹ âŒ <a class="header-anchor" href="#ç¼ºç‚¹-âŒ-1" aria-label="Permalink to &quot;ç¼ºç‚¹ âŒ&quot;">â€‹</a></h3><ul><li>ä»…ç§»åŠ¨ç«¯æ”¯æŒ</li><li>UI ä¸å¯è‡ªå®šä¹‰</li><li>PC ç«¯ä¼šå˜æˆæ–‡ä»¶é€‰æ‹©å™¨</li></ul><h3 id="å®ç°ä»£ç " tabindex="-1">å®ç°ä»£ç  <a class="header-anchor" href="#å®ç°ä»£ç " aria-label="Permalink to &quot;å®ç°ä»£ç &quot;">â€‹</a></h3><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- åŸºç¡€ç”¨æ³• --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> accept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/*&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;camera&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- æ”¯æŒå¤šé€‰çš„ç”¨æ³• --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> accept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/*&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multiple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ä»…æ”¯æŒç›¸æœºæ‹æ‘„çš„ç”¨æ³• --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> accept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/*&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h2 id="ğŸ¥-æ–¹æ¡ˆä¸‰-imagecapture-api" tabindex="-1">ğŸ¥ æ–¹æ¡ˆä¸‰ï¼šImageCapture API <a class="header-anchor" href="#ğŸ¥-æ–¹æ¡ˆä¸‰-imagecapture-api" aria-label="Permalink to &quot;ğŸ¥ æ–¹æ¡ˆä¸‰ï¼šImageCapture API&quot;">â€‹</a></h2><p>è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„æ–°ç‰¹æ€§ï¼Œæä¾›äº†æ›´å¤šé«˜çº§åŠŸèƒ½ã€‚</p><h3 id="ä¼˜ç‚¹-âœ…-2" tabindex="-1">ä¼˜ç‚¹ âœ… <a class="header-anchor" href="#ä¼˜ç‚¹-âœ…-2" aria-label="Permalink to &quot;ä¼˜ç‚¹ âœ…&quot;">â€‹</a></h3><ul><li>å¯è·å– EXIF ä¿¡æ¯</li><li>æ”¯æŒæ›´å¤šé«˜çº§åŠŸèƒ½ï¼ˆå¦‚å¯¹ç„¦ã€æ›å…‰ç­‰ï¼‰</li><li>UI å¯è‡ªå®šä¹‰</li></ul><h3 id="ç¼ºç‚¹-âŒ-2" tabindex="-1">ç¼ºç‚¹ âŒ <a class="header-anchor" href="#ç¼ºç‚¹-âŒ-2" aria-label="Permalink to &quot;ç¼ºç‚¹ âŒ&quot;">â€‹</a></h3><ul><li>æµè§ˆå™¨å…¼å®¹æ€§è¾ƒå·®ï¼ˆç›®å‰ä¸»è¦ Chrome æ”¯æŒï¼‰</li><li>API ä»åœ¨å®éªŒé˜¶æ®µ</li></ul><h3 id="ç¤ºä¾‹ä»£ç " tabindex="-1">ç¤ºä¾‹ä»£ç  <a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-label="Permalink to &quot;ç¤ºä¾‹ä»£ç &quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initImageCapture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.mediaDevices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ video: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> track</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVideoTracks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imageCapture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ImageCapture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(track);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ‹ç…§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> photo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageCapture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">takePhoto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // photo æ˜¯ Blob å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ä¸Šä¼ æˆ–è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è·å–å¸§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> frame</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageCapture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grabFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // frame æ˜¯ ImageBitmap å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆå§‹åŒ–å¤±è´¥:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ğŸ“-æ€»ç»“å»ºè®®" tabindex="-1">ğŸ“ æ€»ç»“å»ºè®® <a class="header-anchor" href="#ğŸ“-æ€»ç»“å»ºè®®" aria-label="Permalink to &quot;ğŸ“ æ€»ç»“å»ºè®®&quot;">â€‹</a></h2><ol><li>å¦‚æœéœ€è¦å®Œå…¨è‡ªå®šä¹‰UIï¼Œæ¨èä½¿ç”¨æ–¹æ¡ˆä¸€ï¼ˆMediaDevices APIï¼‰</li><li>å¦‚æœæ˜¯ç®€å•çš„ç§»åŠ¨ç«¯åº”ç”¨ï¼Œä½¿ç”¨æ–¹æ¡ˆäºŒï¼ˆåŸç”Ÿinputï¼‰æœ€ä¸ºä¾¿æ·</li><li>å¦‚æœéœ€è¦ä¸“ä¸šçš„ç›¸æœºåŠŸèƒ½ä¸”ä¸è€ƒè™‘å…¼å®¹æ€§ï¼Œå¯ä»¥å°è¯•æ–¹æ¡ˆä¸‰ï¼ˆImageCapture APIï¼‰</li></ol><h3 id="ğŸš¨-æ³¨æ„äº‹é¡¹" tabindex="-1">ğŸš¨ æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#ğŸš¨-æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;ğŸš¨ æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><ul><li>æ‰€æœ‰æ–¹æ¡ˆåœ¨ä½¿ç”¨å‰éƒ½éœ€è¦è¿›è¡Œå…¼å®¹æ€§æ£€æŸ¥</li><li>æ³¨æ„å¤„ç†ç”¨æˆ·æ‹’ç»æˆæƒçš„æƒ…å†µ</li><li>åœ¨ç§»åŠ¨ç«¯è¦æ³¨æ„å†…å­˜å ç”¨é—®é¢˜</li><li>å»ºè®®åœ¨ HTTPS ç¯å¢ƒä¸‹ä½¿ç”¨</li><li>æ³¨æ„ç…§ç‰‡çš„å‹ç¼©å’Œè´¨é‡æ§åˆ¶</li></ul>`,35),t=[l];function k(p,e,r,E,d,g){return a(),i("div",null,t)}const o=s(h,[["render",k]]);export{c as __pageData,o as default};
